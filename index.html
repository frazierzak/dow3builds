<!DOCTYPE html>
<html>
	<head>
		<title>Dawn of War 3 Builds</title>
		<meta name="description" content="Creat and share your custom Dawn of War 3 builds with doctrines, elites, and build orders">
		<meta http-equiv="content-type" content="text/html;charset=UTF-8">
		<link rel="stylesheet" type="text/css" href="main.css">
		  <script src="jquery-3.2.1.min.js"></script>
	</head>
	<body>
		<header>
			<a id="logo" href="/">DoW3Builds.com</a>
			<form>
				<select id="race" name="race">
					<option value="sm">SM</option>
					<option value="ork">ORK</option>
					<option value="eld">ELD</option>
				</select>
		</header>
		<section>
			<div id="smSection">
				<table>
				<tr>
					<th>
						Select 1st Elite
					</th>
					<th>
						Select 1st Elite Doctrine
					</th>
					<th>
						Select 2nd Elite
					</th>
					<th>
						Select 2nd Elite Doctrine
					</th>
					<th>
						Select 3rd Elite
					</th>
					<th>
						Select 3rd Elite Doctrine
					</th>
					<th>
						Select Race Doctrines
					</th>
				</tr>
				<tr>
					<td>
						<div id="firstElite">
							<label>
								<input class="single-checkbox" type="radio" name="1stElite" value="killteam" />
								<img src="images/sm/elites/killteamironmaw.png">
							</label>
							<label>
								<input class="single-checkbox" type="radio" name="1stElite" value="librarian" />
								<img src="images/sm/elites/librarianjonahorion.png">
							</label>
							<label>
								<input class="single-checkbox" type="radio" name="1stElite" value="diomedes" />
								<img src="images/sm/elites/chaplaindiomedes.png">
							</label>
							<label>
								<input class="single-checkbox" type="radio" name="1stElite" value="gabriel" />
								<img src="images/sm/elites/gabrielangelos.png">
							</label>
						</div><!-- firstElite -->
					</td>
					<td id="firstEliteDocs">
						<div id="killteam">
							<label>
								<input class="single-checkbox" type="radio" name="1stEliteDoc" value="Doc1" />
								<img src="images/sm/elitedoctrines/killteam1.png">
							</label>
							<label>
								<input class="single-checkbox" type="radio" name="1stEliteDoc" value="Doc2" />
								<img src="images/sm/elitedoctrines/killteam2.png">
							</label>
						</div><!-- killteam -->
						<div id="librarian">
							<label>
								<input class="single-checkbox" type="radio" name="1stEliteDoc" value="Doc1" />
								<img src="images/sm/elitedoctrines/librarian1.png">
							</label>
							<label>
								<input class="single-checkbox" type="radio" name="1stEliteDoc" value="Doc2" />
								<img src="images/sm/elitedoctrines/librarian2.png">
							</label>
						</div><!-- librarian -->
					</td>
					<td>
						<div id="secondElite">
							<label>
								<input class="single-checkbox" type="radio" name="2ndElite" value="killteam" />
								<img src="images/sm/elites/killteamironmaw.png">
							</label>
							<label>
								<input class="single-checkbox" type="radio" name="2ndElite" value="librarian" />
								<img src="images/sm/elites/librarianjonahorion.png">
							</label>
							<label>
								<input class="single-checkbox" type="radio" name="2ndElite" value="diomedes" />
								<img src="images/sm/elites/chaplaindiomedes.png">
							</label>
							<label>
								<input class="single-checkbox" type="radio" name="2ndElite" value="gabriel" />
								<img src="images/sm/elites/gabrielangelos.png">
							</label>
						</div>
					</td>
					<td id="secondEliteDocs">
						<div id="killteam">
							<label>
								<input class="single-checkbox" type="radio" name="1stEliteDoc" value="Doc1" />
								<img src="images/sm/elitedoctrines/killteam1.png">
							</label>
							<label>
								<input class="single-checkbox" type="radio" name="1stEliteDoc" value="Doc2" />
								<img src="images/sm/elitedoctrines/killteam2.png">
							</label>
						</div><!-- killteam -->
						<div id="librarian">
							<label>
								<input class="single-checkbox" type="radio" name="1stEliteDoc" value="Doc1" />
								<img src="images/sm/elitedoctrines/librarian1.png">
							</label>
							<label>
								<input class="single-checkbox" type="radio" name="1stEliteDoc" value="Doc2" />
								<img src="images/sm/elitedoctrines/librarian2.png">
							</label>
						</div><!-- librarian -->
					</td>
					<td>
						<div id="thirdElite">
							<label>
								<input class="single-checkbox" type="radio" name="3rdElite" value="killteam" />
								<img src="images/sm/elites/killteamironmaw.png">
							</label>
							<label>
								<input class="single-checkbox" type="radio" name="3rdElite" value="librarian" />
								<img src="images/sm/elites/librarianjonahorion.png">
							</label>
							<label>
								<input class="single-checkbox" type="radio" name="3rdElite" value="diomedes" />
								<img src="images/sm/elites/chaplaindiomedes.png">
							</label>
							<label>
								<input class="single-checkbox" type="radio" name="3rdElite" value="gabriel" />
								<img src="images/sm/elites/gabrielangelos.png">
							</label>
						</div><!-- thirdElite -->
					</td>
					<td id="thirdEliteDocs">
						<div id="killteam">
							<label>
								<input class="single-checkbox" type="radio" name="1stEliteDoc" value="Doc1" />
								<img src="images/sm/elitedoctrines/killteam1.png">
							</label>
							<label>
								<input class="single-checkbox" type="radio" name="1stEliteDoc" value="Doc2" />
								<img src="images/sm/elitedoctrines/killteam2.png">
							</label>
						</div><!-- killteam -->
						<div id="librarian">
							<label>
								<input class="single-checkbox" type="radio" name="1stEliteDoc" value="Doc1" />
								<img src="images/sm/elitedoctrines/librarian1.png">
							</label>
							<label>
								<input class="single-checkbox" type="radio" name="1stEliteDoc" value="Doc2" />
								<img src="images/sm/elitedoctrines/librarian2.png">
							</label>
						</div><!-- librarian -->
					</td>
					<td>
						<input class="doctrines-checkbox" type="checkbox" name="doctrines" value="doc1">Doctron #1<br/>
						<input class="doctrines-checkbox" type="checkbox" name="doctrines" value="doc2">Doctron #2<br/>
						<input class="doctrines-checkbox" type="checkbox" name="doctrines" value="doc3">Doctron #3<br/>
						<input class="doctrines-checkbox" type="checkbox" name="doctrines" value="doc4">Doctron #4<br/>
						<input class="doctrines-checkbox" type="checkbox" name="doctrines" value="doc5">Doctron #5<br/>
					</td>
				</tr>
				</table>
			</div><!-- smSection -->
			</form>
		</section>
		<p><tt id="results"></tt></p>
		<script>
			function showValues() {
				var str = $( "form" ).serialize();
				$( "#results" ).text( str );
			}
			$( "input[type='checkbox'], input[type='radio']" ).on( "click", showValues );
			$( "select" ).on( "change", showValues );
			showValues();

			var limit = 3;
			$('input.doctrines-checkbox').change(function() {
			   if($(this).siblings(':checked').length >= limit) {
			       this.checked = false;
			       showValues();
			   }
			});

			function switchRaces() {
				var e = document.getElementById("race");
				var race = e.options[e.selectedIndex].value;
				//alert(race);
				if(race == "sm") {
					$("#smSection").show();
					$("#orkSection").hide();
					$("#eldSection").hide();
				};
			};
			switchRaces();

			$('select#race').change(function() {
				switchRaces();
			});

			function disableRadio(changed, x) {
				if ($(x).val() == changed) {
					$(x).prop('checked', false);
					$(x).attr('disabled',true);
					$(x).parent().addClass('disabled');
		        } else {
		        	if ($(x).val() != first_elite && $(x).val() != second_elite && $(x).val() != third_elite) {
		        		$(x).parent().removeClass('disabled');
	        			$(x).attr('disabled',false);
		        	};
		        };
			};

			var first_elite;
			var second_elite;
			var third_elite;

			$('#firstElite input.single-checkbox').change(function() {
				var changed = $(this).val();
				first_elite = changed;
				$('#secondElite input.single-checkbox').each(function() {
					disableRadio(changed, $(this));
					showValues();
				});
				$('#thirdElite input.single-checkbox').each(function() {
					disableRadio(changed, $(this));
			        showValues();
				});
				var e = document.getElementById(changed);
				$('td#firstEliteDocs').children().hide();
				var e = 'td#firstEliteDocs #' + changed;
				$(e).show();
			});

			$('#secondElite input.single-checkbox').change(function() {
				var changed = $(this).val();
				second_elite = changed;
				$('#firstElite input.single-checkbox').each(function() {
					disableRadio(changed, $(this));
			        showValues();
				});
				$('#thirdElite input.single-checkbox').each(function() {
					disableRadio(changed, $(this));
			        showValues();
				});
				var e = document.getElementById(changed);
				$('td#secondEliteDocs').children().hide();
				var e = 'td#secondEliteDocs #' + changed;
				alert(e);
				$(e).show();
			});

			$('#thirdElite input.single-checkbox').change(function() {
				var changed = $(this).val();
				third_elite = changed;
				$('#firstElite input.single-checkbox').each(function() {
					disableRadio(changed, $(this));
			        showValues();
				});
				$('#secondElite input.single-checkbox').each(function() {
					disableRadio(changed, $(this));
					showValues();
				});
				var e = document.getElementById(changed);
				$('td#thirdEliteDocs').children().hide();
				var e = 'td#thirdEliteDocs #' + changed;
				$(e).show();
			});

		</script>
	</body>
</html>